prooph_event_store:
  stores:
    main_store:
      event_store: 'ProophTest\Bundle\EventStore\DependencyInjection\Fixture\EventStore\BlackHole'
      repositories:
         todo_list:
            repository_class: 'ProophTest\Bundle\EventStore\DependencyInjection\Fixture\Model\BlackHoleRepository'
            aggregate_type: 'ProophTest\Bundle\EventStore\DependencyInjection\Fixture\Model\BlackHoleAggregate'
            aggregate_translator: 'ProophTest\Bundle\EventStore\DependencyInjection\Fixture\Model\BlackHoleAggregateTranslator'
            snapshot_store: prooph_test.bundle.snapshot_store.in_memory
            stream_name: 'test'
            one_stream_per_aggregate: true
         ProophTest\Bundle\EventStore\DependencyInjection\Fixture\Model\BlackHoleRepository:
            aggregate_type: 'ProophTest\Bundle\EventStore\DependencyInjection\Fixture\Model\BlackHoleAggregate'
            aggregate_translator: 'ProophTest\Bundle\EventStore\DependencyInjection\Fixture\Model\BlackHoleAggregateTranslator'
  projection_managers:
    main_projection_manager:
      event_store: 'Prooph\EventStore\InMemoryEventStore'
      projections:
        todo_projection:
          read_model: 'ProophTest\Bundle\EventStore\DependencyInjection\Fixture\Projection\TodoReadModel'
          projection: 'ProophTest\Bundle\EventStore\DependencyInjection\Fixture\Projection\TodoProjection'

services:
  Prooph\EventStore\InMemoryEventStore:
    class: Prooph\EventStore\InMemoryEventStore

  test.prooph_event_store.main_store:
    alias: prooph_event_store.main_store
    public: true

  test.todo_list:
    alias: todo_list
    public: true

  test.ProophTest\Bundle\EventStore\DependencyInjection\Fixture\Model\BlackHoleRepository:
    alias: ProophTest\Bundle\EventStore\DependencyInjection\Fixture\Model\BlackHoleRepository
    public: true
